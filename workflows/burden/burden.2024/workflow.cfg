includeConfig("../../../confs/trace.cfg")


plugins {
  id 'nf-schema@2.0.0'
}

params {
	hel=false
	prefix=""
	outdir=""
	vcfs = "NO_FILE"
	samplesheet = "NO_FILE"
	conditions = "NO_FILE"
	/** limit to those region . if it ends with '.list' each bed in the list is a region of interest */
	bed = "NO_FILE"
	group_by_cluster_size = "2Mb"
	phastCons  = "NO_FILE"
	excludeBed = "NO_FILE"
	}


conda.enabled = true
conda.createTimeout="24h"

process {


withName: "CONCAT_VCFS" {
                publishDir = [
		saveAs: { filename -> "${params.prefix}$filename" },
                path:"${params.outdir}/VCF",
                mode: "copy",
                pattern : '*.{bcf,vcf.gz,tbi,csi}',
                overwrite : true
                ]
        }

withName: "PLOTIT" {
                publishDir = [
		saveAs: { filename -> "${params.prefix}$filename" },
                path:"${params.outdir}/IMAGES",
                mode: "copy",
                pattern : '*.{png}',
                overwrite : true
                ]
        }

withName: "MERGE_AND_CLEANUP" {
                publishDir = [
		saveAs: { filename -> "${params.prefix}$filename" },
                path:"${params.outdir}/BED",
                mode: "copy",
                pattern : '*.{bed.gz,bed.gz.tbi}',
                overwrite : true
                ]
        }


withName: "MULTIQC" {   
                publishDir = [ 
		saveAs: { filename -> "${params.prefix}$filename" },
                path:"${params.outdir}/multiqc",
                mode: "copy",
                pattern : '*.{zip}',
                overwrite : true
                ]
        }



withName: "ZIP_IT" {   
                publishDir = [ 
		saveAs: { filename -> "${params.prefix}$filename" },
                path:"${params.outdir}",
                mode: "copy",
                pattern : '*.{zip}',
                overwrite : true
                ]
        }


}

