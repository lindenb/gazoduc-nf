plugins {
  id 'nf-schema@2.6.1'
}

params {
        fasta = null
        help = false
        outdir = "results"
        prefix = ""
	/* csv file with header: sample,bam(,fasta,fai,dict) */
	samplesheet= null
        gtf=null
        bed = null
        gnomad=null
        jvarkit_filter=null
		snpeff_database_directory = "NO_DIR"
	}

includeConfig "../../config/nextflow.config"


validation {
	help {
		showHidden = false
		 enabled = true
		}
	ignoreParams = []
	logging {
		unrecognisedParams = "warn"
		unrecognisedHeaders = "warn"
		}
}



process {
withName: "PREPARE_ONE_REFERENCE:PREPARE_REFERENCE:SCATTER_TO_BED:SCATTER_INTERVALS_BY_NS" {
	ext.output_type = "ACGT"
        ext.max_to_merge = 1
	}
withName: "GTF_TO_EXOME" {
        ext.what = "exon"
        ext.slop = "50"
        }

withName: "BEDTOOLS_MAKEWINDOWS" {
	ext.args = "-w 1000010 -s 1000000"
	}
withName: "GTF_TO_EXOME" {
	ext.what = "exon"
	ext.slop = 10
	ext.extra_cmd = "grep -F protein_coding"
	}
withName:  "BED_CLUSTER" {
	ext.args = "--size 1000000"
	}

withName: "ITER_10:GATK_BAM2VCF" {
	array = 100
	memory = {10.GB  * task.attempt}
	}
withName:  "ITER_10:BED_CLUSTER" {
	ext.args = "--size 100"
	}
}
