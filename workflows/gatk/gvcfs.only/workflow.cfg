plugins {
  id 'nf-schema@2.0.0'
}

includeConfig("../../../confs/trace.cfg")

params {
	help = false
	prefix = "prefix"
	fasta = "NO_FILE"
	dbsnp="NO_FILE"
	samplesheet= "NO_FILE"
	bed="NO_FILE"
	outdir = "results"
	mapq = 10
	compression = "gz" //xz,bz2
	}


process {

withName: "HC_BAM_BED" {
	ext.arg1=""
	ext.arg2=""
	ext.compression_level = 5
	}

withName : "GATHER_VCFS" {


        publishDir = [
                path: {"${params.outdir}/${sample}/GVCF/"},
                saveAs: { filename -> "${params.prefix}$filename" },
                mode: "move",
                pattern : '*.{bcf,csi,vcf.gz,tbi}',
                overwrite : true
                ]

        }

withName : "XZ_VCFS" {
	ext.arg1= "-5"

        publishDir = [
                path: {"${params.outdir}/${sample}/GVCF/"},
                saveAs: { filename -> "${params.prefix}$filename" },
                mode: "move",
                pattern : '*.{xz}',
                overwrite : true
                ]

        }


withName : "BZ2_VCFS" {
	ext.arg1= "--best"

        publishDir = [
                path: {"${params.outdir}/${sample}/GVCF/"},
                saveAs: { filename -> "${params.prefix}$filename" },
                mode: "move",
                pattern : '*.{bz2}',
                overwrite : true
                ]

        }


}
